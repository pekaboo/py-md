---
title: 为啥我不建议使用@Transactional事务
---

不建议过度使用 @Transactional 声明式事务，更推荐编程式事务，核心原因及关键信息如下：

### 📝 核心总结（@Transactional 声明式事务不建议过度使用）
#### 1. 🔍 事务管理的两种核心方式
- 声明式事务：`@Transactional`注解/XML配置，AOP实现无侵入，自动管理事务（开启/提交/回滚），代码简洁。
- 编程式事务：基于`PlatformTransactionManager`等API，手动控制事务流程，代码侵入性强但逻辑直观。

#### 2. ❌ 声明式事务的核心弊端（不推荐的关键原因）
- 🌾 粒度局限+易被忽略：最小作用于方法，开发者可能误将RPC调用、消息发送、文件写入等不可回滚操作纳入事务，导致数据不一致；远程调用拉长事务，占用数据库连接池。
- ⚠️ 易失效且排查难：
  1. 非public方法、传播机制/回滚规则配置错误；
  2. 同类方法调用、异常被catch捕获；
  3. 数据库引擎不支持事务；
  4. 多切面相互影响（如异常被其他切面捕获），事务切面未感知异常导致失效。

#### 3. ✅ 编程式事务的核心优势
- 边界清晰，显式控制事务流程，修改代码时强制考虑操作是否适合纳入事务，降低误操作风险。
- 避免声明式事务的失效场景，不依赖AOP，稳定性更高，线上故障概率更低。

#### 4. 📌 最终建议
- 不彻底禁用声明式事务，但需充分评估其边界局限和失效风险。
- 涉及远程调用、消息发送、跨库操作等场景，优先选择编程式事务，保障数据一致性和系统稳定性。
- 遵循“降低故障概率”原则，通过显式机制/规范减少人为失误影响（参考阿里Java开发手册的规约逻辑）。